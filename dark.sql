create database testDB;
use testDB;

select * from user_;
select * from customer;
select * from admin_;
CREATE TABLE user_ (
    user_id INT NOT NULL CHECK (user_id >= 0 AND user_id <= 99999),
    username VARCHAR(25) NOT NULL,
    upassword VARCHAR(25) NOT NULL,
    usertype INT NOT NULL CHECK (usertype >= 0 AND usertype <= 2)
);
ALTER TABLE user_ ADD CONSTRAINT user_pk PRIMARY KEY ( user_id );

INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10000, 'DavidWallace3', 'Wallace4457', 1);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10001, 'a', 'a', 1);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10002, 'Rreynolds', 'Rey9553', 0);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10003, 'Matt123', 'Digitz3', 0);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10004, 'John226', 'PassWoRd2', 0);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10005, 'Tsawyer', 'Tommy8', 0);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10006, 'DanMan123', 'Pakistan1947', 0);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10007, 'AdiKK', 'RocketLeagueBoy', 0);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10008, 'Rizwan4', 'SriLankaBest2', 0);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10009, 'MasterBoy', 'Kinggg321', 0);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10010, 'JackieChan', 'KarateMaster', 0);
INSERT INTO USER_ (USER_ID, USERNAME, UPASSWORD, USERTYPE) 
VALUES (10011, 'MightyZinger', 'YumYumYummy', 0);

CREATE TABLE game (
    game_id      INT NOT NULL CHECK (game_id >= 0 AND game_id <= 99999),
    game_name    VARCHAR(25) NOT NULL,
    price        INT NOT NULL,
    quantity INT NOT NULL CHECK (quantity >= 0),
    image_url text
);
ALTER TABLE game ADD CONSTRAINT game_pk PRIMARY KEY ( game_id );
INSERT INTO GAME (GAME_ID, GAME_NAME, PRICE, QUANTITY, IMAGE_URL) 
VALUES (20000, 'RDR II', 50, 5, 'https://cdn.akamai.steamstatic.com/steam/apps/1174180/header.jpg?t=1695140956');
INSERT INTO GAME (GAME_ID, GAME_NAME, PRICE, QUANTITY, IMAGE_URL)
VALUES (20001, 'FIFA 23', 20, 8, 'https://imageio.forbes.com/specials-images/imageserve/63424d27fec9cfc1c8de06ab/0x0.jpg?format=jpg&height=900&width=1600&fit=bounds ');
INSERT INTO GAME(GAME_ID, GAME_NAME, PRICE, QUANTITY, IMAGE_URL)
VALUES (20002, 'COD: WARZONE', 40, 4, 'https://cdn.cloudflare.steamstatic.com/steam/apps/1962663/capsule_616x353.jpg?t=1699574148');
INSERT INTO GAME (GAME_ID, GAME_NAME, PRICE, QUANTITY, IMAGE_URL)
VALUES (20003, 'ROCKET LEAGUE', 40, 4, 'https://www.harrisburgu.edu/wp-content/uploads/189dce017fb19e3ca1b94b2095d519cc514df22c.jpg');
INSERT INTO GAME (GAME_ID, GAME_NAME, PRICE, QUANTITY, IMAGE_URL)
VALUES (20004, 'FORTNITE', 25, 2, 'https://cdn.vox-cdn.com/thumbor/rFXKe1MEkG3SMIBSe87hm6gh6Ks=/1400x788/filters:format(jpeg)/cdn.vox-cdn.com/uploads/chorus_asset/file/24714384/C4S3_Battle_Pass_Lineup.jpg');
INSERT INTO GAME (GAME_ID, GAME_NAME, PRICE, QUANTITY, IMAGE_URL)
VALUES (20005, 'GOD OF WAR', 45, 5, 'https://image.api.playstation.com/vulcan/img/rnd/202010/2217/LsaRVLF2IU2L1FNtu9d3MKLq.jpg');
INSERT INTO GAME (GAME_ID, GAME_NAME, PRICE, QUANTITY, IMAGE_URL)
VALUES (20006, 'AC MIRAGE', 50, 9, 'https://image.api.playstation.com/vulcan/ap/rnd/202208/1718/M1M5lbWg6QPwf2gx34N3v78v.jpg');
INSERT INTO GAME (GAME_ID, GAME_NAME, PRICE, QUANTITY, IMAGE_URL)
VALUES (20007, 'CYBERPUNK 2077', 40, 12, 'https://www.cyberpunk.net/build/images/social-thumbnail-en-ddcf4d23.jpg');
INSERT INTO GAME (GAME_ID, GAME_NAME, PRICE, QUANTITY, IMAGE_URL)
VALUES (20008, 'GTA V', 35, 3, 'https://cdn.akamai.steamstatic.com/steam/apps/271590/capsule_616x353.jpg?t=1695060909');

CREATE TABLE admin_ (
admin_id     INT NOT NULL CHECK (admin_id >= 0 AND admin_id <= 99999),    
phone        INT
);
ALTER TABLE admin_ ADD CONSTRAINT admin_pk PRIMARY KEY ( admin_id );
INSERT INTO ADMIN_ (PHONE, ADMIN_ID) 
VALUES (561254250, 10000);
INSERT INTO ADMIN_ (PHONE, ADMIN_ID) 
VALUES (1, 10001);

CREATE TABLE game_developer (
    developer_id  INT NOT NULL CHECK (developer_id >= 0 AND developer_id <= 99999),
	game_id      INT NOT NULL CHECK (game_id >= 0 AND game_id <= 99999)
);
ALTER TABLE GAME_DEVELOPER ADD CONSTRAINT GAME_DEVELOPER_PK PRIMARY KEY(DEVELOPER_id,game_id);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20000, 30000);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20001, 30001);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20002, 30002);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20002, 30003);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20003, 30004);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20003, 30005);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20004, 30006);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20004, 30007);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20005, 30008);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20005, 30009);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20005, 30010);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20005, 30011);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20005, 30012);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20006, 30013);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20007, 30014);
INSERT INTO GAME_DEVELOPER (GAME_ID, DEVELOPER_ID) 
VALUES (20008, 30000);

CREATE TABLE developer_name (
    developer_id  INT NOT NULL CHECK (developer_id >= 0 AND developer_id <= 99999),
    developer_name  VARCHAR(50) NOT NULL
);
ALTER TABLE DEVELOPER_NAME ADD CONSTRAINT DEVELOPER_NAME_PK PRIMARY KEY(DEVELOPER_id);
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30000, 'Rockstar Games');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30001, 'EA Sports');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30002, 'Raven Software');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30003, 'Infinity Ward');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30004, 'Psyonix');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30005, 'Panic Button Games');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30006, 'Epic Games');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30007, 'People Can Fly');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30008, 'Javaground');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30009, ' Santa Monica Studio');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30010, 'Ready at Dawn');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30011, 'Bluepoint Games');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30012, 'Daybreak Game Company');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30013, 'Ubisoft');
INSERT INTO DEVELOPER_NAME (DEVELOPER_ID, DEVELOPER_NAME) 
VALUES (30014, 'CD Projeckt RED');

CREATE TABLE customer (    
    customer_id    INT NOT NULL CHECK (customer_id >= 0 AND customer_id <= 99999),
    loyalty_points INTEGER NOT NULL CHECK (loyalty_points >= 0)
);
ALTER TABLE customer ADD CONSTRAINT customer_pk PRIMARY KEY ( customer_id );
INSERT INTO CUSTOMER (LOYALTY_POINTS, CUSTOMER_ID) 
VALUES (22, 10000);
INSERT INTO CUSTOMER (LOYALTY_POINTS, CUSTOMER_ID) 
VALUES (64, 10001);
INSERT INTO CUSTOMER (LOYALTY_POINTS, CUSTOMER_ID) 
VALUES (71, 10002);
INSERT INTO CUSTOMER (LOYALTY_POINTS, CUSTOMER_ID) 
VALUES (39, 10003);
INSERT INTO CUSTOMER (LOYALTY_POINTS, CUSTOMER_ID) 
VALUES (0, 10004);
INSERT INTO CUSTOMER (LOYALTY_POINTS, CUSTOMER_ID) 
VALUES (22, 10005);
INSERT INTO CUSTOMER (LOYALTY_POINTS, CUSTOMER_ID) 
VALUES (44, 10006);

CREATE TABLE buys (
    bcustomer_id INT NOT NULL CHECK (bcustomer_id >= 0 AND bcustomer_id <= 99999),
    bgame_id INT NOT NULL CHECK (bgame_id >= 0 AND bgame_id <= 99999)
);
ALTER TABLE buys ADD CONSTRAINT buys_pk PRIMARY KEY ( bcustomer_id,bgame_id );
INSERT INTO BUYS (bCUSTOMER_ID, bGAME_ID) 
VALUES (10000, 20001);
INSERT INTO BUYS (bCUSTOMER_ID, bGAME_ID) 
VALUES (10001, 20003);
INSERT INTO BUYS (bCUSTOMER_ID, bGAME_ID) 
VALUES (10002, 20002);
INSERT INTO BUYS (bCUSTOMER_ID, bGAME_ID) 
VALUES (10003, 20000);
INSERT INTO BUYS (bCUSTOMER_ID, bGAME_ID) 
VALUES (10004, 20001);
INSERT INTO BUYS (bCUSTOMER_ID, bGAME_ID) 
VALUES (10005, 20004);
INSERT INTO BUYS (bCUSTOMER_ID, bGAME_ID) 
VALUES (10006, 20002);
select * from buys;

ALTER TABLE game_developer
    ADD CONSTRAINT game_developer_game_id_fk FOREIGN KEY ( game_id )
        REFERENCES game ( game_id )
        ON DELETE CASCADE;
	ALTER TABLE game_developer
    DROP CONSTRAINT game_developer_game_id_fk;
ALTER TABLE game_developer
    ADD CONSTRAINT game_developer_developer_id_fk FOREIGN KEY ( developer_id )
        REFERENCES developer_name ( developer_id );
        
ALTER TABLE buys
    ADD CONSTRAINT buys_bgame_id_fk FOREIGN KEY ( bgame_id )
        REFERENCES game ( game_id )
        ON DELETE CASCADE;
ALTER TABLE buys
    DROP CONSTRAINT buys_bgame_id_fk;
ALTER TABLE buys
    ADD CONSTRAINT buys_bcustomer_id_fk FOREIGN KEY ( bcustomer_id )
        REFERENCES customer ( customer_id )
        on delete cascade;
        alter table buys drop constraint buys_bcustomer_id_fk;
ALTER TABLE admin_
    ADD CONSTRAINT admin__fk FOREIGN KEY ( admin_id )
        REFERENCES user_ ( user_id );
        
ALTER TABLE customer
    ADD CONSTRAINT customer_fk FOREIGN KEY ( customer_id )
        REFERENCES user_ ( user_id )
        on delete cascade;
        alter table customer drop constraint customer_fk;
        
